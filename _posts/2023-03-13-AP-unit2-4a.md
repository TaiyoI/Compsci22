---
keywords: fastai
description: Using Programs with Data is focused on SQL and database actions.  Part A focuses on SQLAlchemy and an OOP programming style,
title: Unit 2.4a Using Programs with Data, SQLAlchemy
toc: true
image: /images/python.png
categories: []
type: ap
week: 26
nb_path: _notebooks/2023-03-13-AP-unit2-4a.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2023-03-13-AP-unit2-4a.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="2.4-A-Notes">2.4 A Notes<a class="anchor-link" href="#2.4-A-Notes"> </a></h1><h3 id="College-Board-talks-about-ideas-like:">College Board talks about ideas like:<a class="anchor-link" href="#College-Board-talks-about-ideas-like:"> </a></h3><ul>
<li><p><strong>Program Usage:</strong> This refers to the way in which programs are used to process information in an iterative and interactive manner.</p>
</li>
<li><p><strong>Managing Data:</strong> This involves classifying data as part of the process of using programs, and organizing data files in a table.</p>
</li>
<li><p><strong>Insight:</strong> The College Board suggests that insight and knowledge can be obtained from digitally represented information.</p>
</li>
<li><p><strong>Filter Systems:</strong> This refers to the tools used to find information and recognize patterns within data.</p>
</li>
<li><p>Application: The College Board gives an example of an employee wanting to count the number of books in two databases that the preserve has.</p>
</li>
</ul>
<h3 id="PBL,-Databases,-Iterative/OOP:">PBL, Databases, Iterative/OOP:<a class="anchor-link" href="#PBL,-Databases,-Iterative/OOP:"> </a></h3><ul>
<li><p><strong>Iterative:</strong> Refers to a process in which a sequence of instructions or code is repeated until a specific end result is achieved.</p>
</li>
<li><p><strong>OOP:</strong> An approach to computer programming in which software design is based on objects or data, rather than functions and logic.</p>
</li>
<li><p><strong>SQL:</strong> Structured Query Language, abbreviated as SQL, is a language used in programming, managing, and structuring data, often used in managing databases.</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Imports-and-Flask-Objects">Imports and Flask Objects<a class="anchor-link" href="#Imports-and-Flask-Objects"> </a></h2><blockquote><p>Defines and key object creations</p>
</blockquote>
<ul>
<li><p>Comment on where you have observed these working?  Provide a defintion of purpose.</p>
</li>
<li><p><strong>Flask app object:</strong>
I have observed the Flask app object working in various web development projects. Flask is a popular web framework for building web applications with Python. The Flask app object is the central point of the application, and is used to configure the application and define the application routes. Its purpose is to create and configure the Flask application, including any extensions or third-party libraries, and handle the routing of incoming requests.</p>
</li>
<li><p><strong>SQLAlchemy db object:</strong></p>
</li>
</ul>
<p>I have also observed the SQLAlchemy db object in various Python-based web development projects. SQLAlchemy is a popular Object Relational Mapper (ORM) for working with databases in Python. The db object is used to represent the database connection, and is used to interact with the database, including creating tables, querying data, and performing transactions. Its purpose is to provide a high-level, object-oriented interface for working with databases, and to abstract away the details of the underlying database engine, allowing developers to focus on their application logic rather than low-level database operations.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">These imports define the key objects</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">These object and definitions are used throughout the Jupyter Notebook.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Setup of key Flask object (app)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="c1"># Setup SQLAlchemy object and properties for the database (db)</span>
<span class="n">database</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///sqlite.db&#39;</span>  <span class="c1"># path and filename of database</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_TRACK_MODIFICATIONS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">database</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;SECRET_KEY&#39;</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">()</span>


<span class="c1"># This belongs in place where it runs once per project</span>
<span class="n">db</span><span class="o">.</span><span class="n">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Model-Definition">Model Definition<a class="anchor-link" href="#Model-Definition"> </a></h2><blockquote><p>Define columns, initialization, and CRUD methods for users table in sqlite.db</p>
</blockquote>
<ul>
<li><p><strong>class User:</strong>
The class User is a Python class that represents a user entity in an application. It is used in many web applications to store user-related information, such as their name, email, and password. Its purpose is to provide a blueprint for creating user objects that can be stored and retrieved from a database.</p>
</li>
<li><p><strong>db.Model inheritance:</strong></p>
</li>
</ul>
<p>The db.Model inheritance refers to the inheritance of the db.Model class from the SQLAlchemy library. In Python-based web applications, this inheritance is commonly used to define database models for different entities, such as users, posts, and comments. The purpose of inheriting from the db.Model class is to provide a set of predefined methods and attributes that enable interaction with the underlying database. By using this inheritance, developers can create more efficient and streamlined code for database operations.</p>
<ul>
<li><strong>init method:</strong></li>
</ul>
<p>The init method is a special method in Python classes that is called when an object of the class is created. In database models, this method is commonly used to initialize the attributes of an object with default or user-defined values. The purpose of the init method is to provide a way to create instances of the class with specific attributes, making it easier to work with the class in other parts of the application.</p>
<ul>
<li><strong>@property, @<column>.setter:</strong></li>
</ul>
<p>These are Python decorators that are commonly used in database models. The @property decorator is used to define a getter method for a class attribute, while the @<column>.setter decorator is used to define a setter method for a specific column in the database. The purpose of these decorators is to provide a more Pythonic way of working with class attributes and database columns, and to enable additional functionality, such as validation or formatting, when getting or setting attributes.</p>
<ul>
<li><strong>create, read, update, delete methods:</strong></li>
</ul>
<p>These are commonly used methods in database models that represent the basic operations that can be performed on a database entity. The create method is used to create a new entity in the database, the read method is used to retrieve one or more entities from the database, the update method is used to update an existing entity in the database, and the delete method is used to remove an entity from the database. The purpose of these methods is to provide a way to interact with the database in a standard way that is easy to understand and maintain. By using these methods, developers can create more efficient and streamlined code for database operations.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">&quot;&quot;&quot; database dependencies to support sqlite examples &quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">datetime</span> 
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.exc</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
<span class="kn">from</span> <span class="nn">werkzeug.security</span> <span class="kn">import</span> <span class="n">generate_password_hash</span><span class="p">,</span> <span class="n">check_password_hash</span>


<span class="sd">&#39;&#39;&#39; Tutorial: https://www.sqlalchemy.org/library.html#tutorials, try to get into a Python shell and follow along &#39;&#39;&#39;</span>

<span class="c1"># Define the User class to manage actions in the &#39;users&#39; table</span>
<span class="c1"># -- Object Relational Mapping (ORM) is the key concept of SQLAlchemy</span>
<span class="c1"># -- a.) db.Model is like an inner layer of the onion in ORM</span>
<span class="c1"># -- b.) User represents data we want to store, something that is built on db.Model</span>
<span class="c1"># -- c.) SQLAlchemy ORM is layer on top of SQLAlchemy Core, then SQLAlchemy engine, SQL</span>
<span class="c1"># defining the template the class of Users, class definition template, helps us create objects which are of the type User, template for future object</span>
<span class="k">class</span> <span class="nc">Restaurant_B</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;Restaurant_business&#39;</span>  <span class="c1"># table name is plural, class name is singular</span>

    <span class="c1"># Define the User schema with &quot;vars&quot; from object</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">_Restaurant</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_Sales</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_Avg</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_City</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_State</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_Meals</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># constructor of a User object, initializes the instance variables within object (self)</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Restaurant</span><span class="p">,</span> <span class="n">Sales</span><span class="p">,</span> <span class="n">Avg</span><span class="p">,</span> <span class="n">City</span><span class="p">,</span> <span class="n">State</span><span class="p">,</span> <span class="n">Meals</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Restaurant</span> <span class="o">=</span> <span class="n">Restaurant</span>    <span class="c1"># variables with self prefix become part of the object, </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Sales</span> <span class="o">=</span> <span class="n">Sales</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Avg</span> <span class="o">=</span> <span class="n">Avg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_City</span> <span class="o">=</span> <span class="n">City</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_State</span> <span class="o">=</span> <span class="n">State</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Meals</span> <span class="o">=</span> <span class="n">Meals</span>

    <span class="c1"># a name getter method, extracts name from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Restaurant</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Restaurant</span>
    
    <span class="c1"># a setter function, allows name to be updated after initial object creation</span>
    <span class="nd">@Restaurant</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">Restaurant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Restaurant</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Restaurant</span> <span class="o">=</span> <span class="n">Restaurant</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Sales</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Sales</span>
    
    <span class="c1"># a setter function, allows name to be updated after initial object creation</span>
    <span class="nd">@Sales</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">Sales</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Sales</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Sales</span> <span class="o">=</span> <span class="n">Sales</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Avg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Avg</span>
    
    <span class="c1"># a setter function, allows name to be updated after initial object creation</span>
    <span class="nd">@Avg</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">Avg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Avg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Avg</span> <span class="o">=</span> <span class="n">Avg</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">City</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_City</span>
    
    <span class="c1"># a setter function, allows name to be updated after initial object creation</span>
    <span class="nd">@City</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">City</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">City</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_City</span> <span class="o">=</span> <span class="n">City</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">State</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_State</span>
    
    <span class="c1"># a setter function, allows name to be updated after initial object creation</span>
    <span class="nd">@State</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">State</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">State</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_State</span> <span class="o">=</span> <span class="n">State</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Meals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Meals</span>
    
    <span class="nd">@Meals</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">Meals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Meals</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Meals</span> <span class="o">=</span> <span class="n">Meals</span>
    
    <span class="c1"># output content using str(object) in human readable form, uses getter</span>
    <span class="c1"># output content using json dumps, this is ready for API response</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="c1"># CRUD create/add a new record to the table</span>
    <span class="c1"># returns self or None on error</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># creates a person object from User(db.Model) class, passes initializers</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add prepares to persist person object to Users table</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># SqlAlchemy &quot;unit of work pattern&quot; requires a manual commit</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># CRUD read converts self to dictionary</span>
    <span class="c1"># returns dictionary</span>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">&quot;Restaurant&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">Restaurant</span><span class="p">,</span>
            <span class="s2">&quot;Sales&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">Sales</span><span class="p">,</span>
            <span class="s2">&quot;Avg&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">Avg</span><span class="p">,</span>
            <span class="s2">&quot;City&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">City</span><span class="p">,</span>
            <span class="s2">&quot;State&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">State</span><span class="p">,</span>
            <span class="s2">&quot;Meals&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meals</span>
        <span class="p">}</span>

    <span class="c1"># CRUD update: updates user name, password, phone</span>
    <span class="c1"># returns self</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Restaurant</span><span class="p">,</span> <span class="n">Sales</span><span class="p">,</span> <span class="n">Avg</span><span class="p">,</span> <span class="n">City</span><span class="p">,</span> <span class="n">State</span><span class="p">,</span> <span class="n">Meals</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;only updates values with length&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">Restaurant</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Restaurant</span> <span class="o">=</span> <span class="n">Restaurant</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">Sales</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sales</span> <span class="o">=</span> <span class="n">Sales</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">Avg</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Avg</span> <span class="o">=</span> <span class="n">Avg</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">City</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">City</span> <span class="o">=</span> <span class="n">City</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">State</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">State</span> <span class="o">=</span> <span class="n">State</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">Meals</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Meals</span> <span class="o">=</span> <span class="n">Meals</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="c1"># CRUD delete: remove self</span>
    <span class="c1"># None</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Initial-Data">Initial Data<a class="anchor-link" href="#Initial-Data"> </a></h2><blockquote><p>Uses SQLALchemy db.create_all() to initialize rows into sqlite.db</p>
</blockquote>
<ul>
<li><p><strong>Create All Tables from db Object:</strong>
Creating all tables from the db object involves using SQLAlchemy's create_all method to generate the necessary database tables based on the defined models. This method scans the application for all models that inherit from db.Model and creates the corresponding tables in the database. The purpose of this method is to automate the process of creating database tables, rather than manually creating them in the database. This method can be used during the application's initialization to ensure that all the required tables exist before the application starts serving requests.</p>
</li>
<li><p><strong>User Object Constructors:</strong></p>
</li>
</ul>
<p>In Python, object constructors are special methods that are called when an object is created. User object constructors are used to initialize user objects with default or user-defined values. They are used to set initial attributes for the user object, such as the user's name, email, and password. The purpose of the user object constructors is to provide a way to create user objects with specific attributes that can be used throughout the application.</p>
<ul>
<li><strong>Try / Except:</strong></li>
</ul>
<p>The try/except statement in Python is used to handle exceptions or errors that may occur during the execution of code. The try block contains the code that may raise an exception, while the except block contains the code that should be executed if an exception occurs. The purpose of the try/except statement is to gracefully handle exceptions, preventing the application from crashing due to unhandled errors. This is particularly useful in web applications, where users may interact with the application in unpredictable ways, and errors can occur at any time. By using try/except statements, developers can catch and handle errors, providing a better user experience and preventing security vulnerabilities.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">&quot;&quot;&quot;Database Creation and Testing &quot;&quot;&quot;</span>


<span class="c1"># Builds working data for testing</span>
<span class="k">def</span> <span class="nf">initRestaurant_business</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Create database and tables&quot;&quot;&quot;</span>
        <span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>
        <span class="sd">&quot;&quot;&quot;Tester data for table&quot;&quot;&quot;</span>
        <span class="n">R1</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Komodo&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;41,000,000&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;115&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Miami&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;Fla.&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;285,000&#39;</span><span class="p">)</span>
        <span class="n">R2</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;The Boathouse Orlando&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;39,863,628&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;44&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Fla.&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;25&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;921,785&#39;</span><span class="p">)</span>
        <span class="n">R3</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Swan&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;31,000,000&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;85&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Miami&#39;</span><span class="p">,</span><span class="n">State</span><span class="o">=</span><span class="s1">&#39;Fla.&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;185,000&#39;</span><span class="p">)</span>
        <span class="n">R4</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Maple &amp; Ash (Chicago)&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;30,286,684&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;106&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Chicago&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;Ill.&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;285,714&#39;</span><span class="p">)</span>
        <span class="n">R5</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Mila&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;27,350,000&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;134&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Miami Beach&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;Fla.&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;203,990&#39;</span><span class="p">)</span>
        <span class="n">R6</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Alinea&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;27,072,500&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;650&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Chicago&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;Ill.&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;41,650&#39;</span><span class="p">)</span>
        <span class="n">R7</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;CTop of the World&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;25,672,308&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;133&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Las Vegas&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;Nev.&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;218,586&#39;</span><span class="p">)</span>
        <span class="n">R8</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Shooters Waterfront&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;25,025,370&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;68&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Fort Lauderdale&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;Fla.&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;419,972&#39;</span><span class="p">)</span>
        <span class="n">R9</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Prime 112&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;24,750,000&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;155&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Miami Beach&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;Fla.&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;210,000&#39;</span><span class="p">)</span>
        <span class="n">R10</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Paddlefish&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;23,795,000&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;52&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Orlando&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;Fla.&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;485,000&#39;</span><span class="p">)</span>
        <span class="n">R11</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Capa&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;23,547,000&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;121&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Orlando&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;Fla.&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;197,000&#39;</span><span class="p">)</span>
        <span class="n">R12</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Maple &amp; Ash (Scottsdale)&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;23,487,122&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;95&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Scottsdale&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;Ariz.&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;247,232&#39;</span><span class="p">)</span>
        <span class="n">R13</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Commanders Palace&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;23,184,000&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;89&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;New Orleans&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;La.&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;264,000&#39;</span> <span class="p">)</span>
        <span class="n">R14</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Taste of Texas&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;23,180,522&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;64&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Houston&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;Texas&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;356,894&#39;</span><span class="p">)</span>
        <span class="n">R15</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="s1">&#39;Joes Seafood, Prime Steak &amp; Stone Crab&#39;</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="s1">&#39;22,477,000&#39;</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="s1">&#39;94&#39;</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="s1">&#39;Washington&#39;</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="s1">&#39;N/A&#39;</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="s1">&#39;255,000&#39;</span><span class="p">)</span>
        <span class="n">Rest</span> <span class="o">=</span> <span class="p">[</span><span class="n">R1</span><span class="p">,</span> <span class="n">R2</span><span class="p">,</span> <span class="n">R3</span><span class="p">,</span> <span class="n">R4</span><span class="p">,</span> <span class="n">R5</span><span class="p">,</span> <span class="n">R6</span><span class="p">,</span> <span class="n">R7</span><span class="p">,</span> <span class="n">R8</span><span class="p">,</span> <span class="n">R9</span><span class="p">,</span> <span class="n">R10</span><span class="p">,</span> <span class="n">R11</span><span class="p">,</span> <span class="n">R12</span><span class="p">,</span> <span class="n">R13</span><span class="p">,</span> <span class="n">R14</span><span class="p">,</span> <span class="n">R15</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">R</span> <span class="ow">in</span> <span class="n">Rest</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">object</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Added data for </span><span class="si">{</span><span class="nb">object</span><span class="o">.</span><span class="n">Restaurant</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
                <span class="sd">&#39;&#39;&#39;fails with bad or duplicate data&#39;&#39;&#39;</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Records exist, duplicate email, or error: </span><span class="si">{</span><span class="n">R</span><span class="o">.</span><span class="n">Restaurant</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> 

<span class="n">initRestaurant_business</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Added data for Komodo
Added data for The Boathouse Orlando
Added data for Swan
Added data for Maple &amp; Ash (Chicago)
Added data for Mila
Added data for Alinea
Added data for CTop of the World
Added data for Shooters Waterfront
Added data for Prime 112
Added data for Paddlefish
Added data for Capa
Added data for Maple &amp; Ash (Scottsdale)
Added data for Commanders Palace
Added data for Taste of Texas
Added data for Joes Seafood, Prime Steak &amp; Stone Crab
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Check-for-given-Credentials-in-users-table-in-sqlite.db">Check for given Credentials in users table in sqlite.db<a class="anchor-link" href="#Check-for-given-Credentials-in-users-table-in-sqlite.db"> </a></h2><blockquote><p>Use of ORM Query object and custom methods to identify user to credentials uid and password</p>
</blockquote>
<ul>
<li><p><strong>User.query.filter_by:</strong>
User.query.filter_by is a method in SQLAlchemy that is used to retrieve data from the database based on specific filter conditions. In this case, it is used to retrieve a specific user object from the database based on the value of one or more attributes, such as the user's email or ID. The purpose of this method is to provide a convenient way to retrieve data from the database that meets specific criteria. By using filter_by, developers can write more efficient code that retrieves only the data that is needed, rather than retrieving all data and filtering it in the application code.</p>
</li>
<li><p><strong>user.password:</strong></p>
</li>
</ul>
<p>user.password refers to the password attribute of a User object. This attribute is commonly used to store a user's password in a secure and encrypted format, such as using a hash function. The purpose of this attribute is to store the user's password securely, ensuring that it is not visible or easily accessible to anyone, including the application developers or database administrators. By storing passwords securely, applications can protect user accounts from unauthorized access and prevent security breaches.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">find_by_Restaurant</span><span class="p">(</span><span class="n">Restaurant</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="c1"># ORM allows us to do query methods on our data</span>
        <span class="c1"># only returns the match to the first match to the database</span>
        <span class="n">restaurant_B</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_Restaurant</span><span class="o">=</span><span class="n">Restaurant</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">restaurant_B</span> <span class="c1"># returns user object</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-a-new-User-in-table-in-Sqlite.db">Create a new User in table in Sqlite.db<a class="anchor-link" href="#Create-a-new-User-in-table-in-Sqlite.db"> </a></h2><blockquote><p>Uses SQLALchemy and custom user.create() method to add row.</p>
</blockquote>
<ul>
<li><p><strong>user.find_by_uid() and try/except:</strong>
user.find_by_uid() is a method that is used to retrieve a user object from the database based on the user's ID. The purpose of this method is to provide a convenient way to retrieve user objects based on a unique identifier, such as an ID or email address. The try/except block is used to handle any errors that may occur during the execution of the method, such as if the user does not exist in the database. By using try/except, developers can catch and handle errors gracefully, providing a better user experience and preventing security vulnerabilities.</p>
</li>
<li><p><strong>user = User(...):</strong></p>
</li>
</ul>
<p>user = User(...) is a statement that creates a new user object with the specified attributes, such as the user's name, email, and password. The purpose of this statement is to create a new user object that can be saved to the database or used in the application code.</p>
<ul>
<li><strong>user.dob and try/except:</strong></li>
</ul>
<p>user.dob refers to the date of birth attribute of a User object. The try/except block is used to handle any errors that may occur during the execution of the code that accesses this attribute, such as if the attribute is not set or is invalid. By using try/except, developers can catch and handle errors gracefully, providing a better user experience and preventing security vulnerabilities.</p>
<ul>
<li><strong>user.create() and try/except:</strong></li>
</ul>
<p>user.create() is a method that is used to save a new user object to the database. The try/except block is used to handle any errors that may occur during the execution of the method, such as if the user object is invalid or if there is an error connecting to the database. By using try/except, developers can catch and handle errors gracefully, providing a better user experience and preventing security vulnerabilities.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">create</span><span class="p">():</span>
    <span class="c1"># optimize user time to see if uid exists</span>
    <span class="n">Restaurant</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter a Restaurant name:&quot;</span><span class="p">)</span>
    <span class="n">Dinner</span> <span class="o">=</span> <span class="n">find_by_Restaurant</span><span class="p">(</span><span class="n">Restaurant</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Found</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">Dinner</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">return</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span> <span class="c1"># keep going</span>
    
    <span class="c1"># request value that ensure creating valid object</span>
    <span class="n">Sales</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the total sales:&quot;</span><span class="p">)</span>
    <span class="n">Avg</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter their average check:&quot;</span><span class="p">)</span>
    <span class="n">City</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the City:&quot;</span><span class="p">)</span>
    <span class="n">State</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the state:&quot;</span><span class="p">)</span>
    <span class="n">Meals</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the total meals served:&quot;</span><span class="p">)</span>

    <span class="c1"># Initialize User object before date</span>
    <span class="n">restaurant_B</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="n">Restaurant</span><span class="p">,</span> 
                <span class="n">Sales</span><span class="o">=</span><span class="n">Sales</span><span class="p">,</span> 
                <span class="n">Avg</span><span class="o">=</span><span class="n">Avg</span><span class="p">,</span>
                <span class="n">City</span><span class="o">=</span><span class="n">City</span><span class="p">,</span>
                <span class="n">State</span><span class="o">=</span><span class="n">State</span><span class="p">,</span>
                <span class="n">Meals</span><span class="o">=</span><span class="n">Meals</span>
                <span class="p">)</span>
           
    <span class="c1"># write object to database</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">object</span> <span class="o">=</span> <span class="n">restaurant_B</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Created</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">object</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object not created</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unknown error uid </span><span class="si">{Restaurant}</span><span class="s2">&quot;</span><span class="p">)</span>
        
<span class="n">create</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Created
 {&#39;id&#39;: 16, &#39;Restaurant&#39;: &#39;In-n-out&#39;, &#39;Sales&#39;: &#39;1200&#39;, &#39;Avg&#39;: &#39;30&#39;, &#39;City&#39;: &#39;San Diego&#39;, &#39;State&#39;: &#39;California&#39;, &#39;Meals&#39;: &#39;800000&#39;}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Reading-users-table-in-sqlite.db">Reading users table in sqlite.db<a class="anchor-link" href="#Reading-users-table-in-sqlite.db"> </a></h2><blockquote><p>Uses SQLALchemy query.all method to read data</p>
</blockquote>
<ul>
<li><p><strong>User.query.all:</strong>
User.query.all is a method that is used to retrieve all User objects from the database. The purpose of this method is to provide a convenient way to retrieve all User objects for use in the application code. The returned objects can be used for further processing, such as displaying them to the user or manipulating them in some way.</p>
</li>
<li><p><strong>json_ready assignment, google List Comprehension:</strong></p>
</li>
</ul>
<p>json_ready is a variable that is assigned the result of a list comprehension, which is a concise way to create a list in Python. The purpose of this variable is to create a list of dictionaries that can be easily converted to JSON format for use in a web application. List comprehension is used to create a list of dictionaries based on the User objects retrieved from the database, with each dictionary representing a User object and its attributes. The resulting list of dictionaries can be easily serialized to JSON format and sent to the client-side of a web application.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">read</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">json_ready</span> <span class="o">=</span> <span class="p">[</span><span class="n">restaurant_B</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="k">for</span> <span class="n">restaurant_B</span> <span class="ow">in</span> <span class="n">table</span><span class="p">]</span> <span class="c1"># &quot;List Comprehensions&quot;, for each user add user.read() to list</span>
    <span class="k">return</span> <span class="n">json_ready</span>

<span class="n">read</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[{&#39;id&#39;: 1,
  &#39;Restaurant&#39;: &#39;Komodo&#39;,
  &#39;Sales&#39;: &#39;41,000,000&#39;,
  &#39;Avg&#39;: &#39;115&#39;,
  &#39;City&#39;: &#39;Miami&#39;,
  &#39;State&#39;: &#39;Fla.&#39;,
  &#39;Meals&#39;: &#39;285,000&#39;},
 {&#39;id&#39;: 2,
  &#39;Restaurant&#39;: &#39;The Boathouse Orlando&#39;,
  &#39;Sales&#39;: &#39;39,863,628&#39;,
  &#39;Avg&#39;: &#39;44&#39;,
  &#39;City&#39;: &#39;Fla.&#39;,
  &#39;State&#39;: &#39;25&#39;,
  &#39;Meals&#39;: &#39;921,785&#39;},
 {&#39;id&#39;: 3,
  &#39;Restaurant&#39;: &#39;Swan&#39;,
  &#39;Sales&#39;: &#39;31,000,000&#39;,
  &#39;Avg&#39;: &#39;85&#39;,
  &#39;City&#39;: &#39;Miami&#39;,
  &#39;State&#39;: &#39;Fla.&#39;,
  &#39;Meals&#39;: &#39;185,000&#39;},
 {&#39;id&#39;: 4,
  &#39;Restaurant&#39;: &#39;Maple &amp; Ash (Chicago)&#39;,
  &#39;Sales&#39;: &#39;30,286,684&#39;,
  &#39;Avg&#39;: &#39;106&#39;,
  &#39;City&#39;: &#39;Chicago&#39;,
  &#39;State&#39;: &#39;Ill.&#39;,
  &#39;Meals&#39;: &#39;285,714&#39;},
 {&#39;id&#39;: 5,
  &#39;Restaurant&#39;: &#39;Mila&#39;,
  &#39;Sales&#39;: &#39;27,350,000&#39;,
  &#39;Avg&#39;: &#39;134&#39;,
  &#39;City&#39;: &#39;Miami Beach&#39;,
  &#39;State&#39;: &#39;Fla.&#39;,
  &#39;Meals&#39;: &#39;203,990&#39;},
 {&#39;id&#39;: 6,
  &#39;Restaurant&#39;: &#39;Alinea&#39;,
  &#39;Sales&#39;: &#39;27,072,500&#39;,
  &#39;Avg&#39;: &#39;650&#39;,
  &#39;City&#39;: &#39;Chicago&#39;,
  &#39;State&#39;: &#39;Ill.&#39;,
  &#39;Meals&#39;: &#39;41,650&#39;},
 {&#39;id&#39;: 7,
  &#39;Restaurant&#39;: &#39;CTop of the World&#39;,
  &#39;Sales&#39;: &#39;25,672,308&#39;,
  &#39;Avg&#39;: &#39;133&#39;,
  &#39;City&#39;: &#39;Las Vegas&#39;,
  &#39;State&#39;: &#39;Nev.&#39;,
  &#39;Meals&#39;: &#39;218,586&#39;},
 {&#39;id&#39;: 8,
  &#39;Restaurant&#39;: &#39;Shooters Waterfront&#39;,
  &#39;Sales&#39;: &#39;25,025,370&#39;,
  &#39;Avg&#39;: &#39;68&#39;,
  &#39;City&#39;: &#39;Fort Lauderdale&#39;,
  &#39;State&#39;: &#39;Fla.&#39;,
  &#39;Meals&#39;: &#39;419,972&#39;},
 {&#39;id&#39;: 9,
  &#39;Restaurant&#39;: &#39;Prime 112&#39;,
  &#39;Sales&#39;: &#39;24,750,000&#39;,
  &#39;Avg&#39;: &#39;155&#39;,
  &#39;City&#39;: &#39;Miami Beach&#39;,
  &#39;State&#39;: &#39;Fla.&#39;,
  &#39;Meals&#39;: &#39;210,000&#39;},
 {&#39;id&#39;: 10,
  &#39;Restaurant&#39;: &#39;Paddlefish&#39;,
  &#39;Sales&#39;: &#39;23,795,000&#39;,
  &#39;Avg&#39;: &#39;52&#39;,
  &#39;City&#39;: &#39;Orlando&#39;,
  &#39;State&#39;: &#39;Fla.&#39;,
  &#39;Meals&#39;: &#39;485,000&#39;},
 {&#39;id&#39;: 11,
  &#39;Restaurant&#39;: &#39;Capa&#39;,
  &#39;Sales&#39;: &#39;23,547,000&#39;,
  &#39;Avg&#39;: &#39;121&#39;,
  &#39;City&#39;: &#39;Orlando&#39;,
  &#39;State&#39;: &#39;Fla.&#39;,
  &#39;Meals&#39;: &#39;197,000&#39;},
 {&#39;id&#39;: 12,
  &#39;Restaurant&#39;: &#39;Maple &amp; Ash (Scottsdale)&#39;,
  &#39;Sales&#39;: &#39;23,487,122&#39;,
  &#39;Avg&#39;: &#39;95&#39;,
  &#39;City&#39;: &#39;Scottsdale&#39;,
  &#39;State&#39;: &#39;Ariz.&#39;,
  &#39;Meals&#39;: &#39;247,232&#39;},
 {&#39;id&#39;: 13,
  &#39;Restaurant&#39;: &#39;Commanders Palace&#39;,
  &#39;Sales&#39;: &#39;23,184,000&#39;,
  &#39;Avg&#39;: &#39;89&#39;,
  &#39;City&#39;: &#39;New Orleans&#39;,
  &#39;State&#39;: &#39;La.&#39;,
  &#39;Meals&#39;: &#39;264,000&#39;},
 {&#39;id&#39;: 14,
  &#39;Restaurant&#39;: &#39;Taste of Texas&#39;,
  &#39;Sales&#39;: &#39;23,180,522&#39;,
  &#39;Avg&#39;: &#39;64&#39;,
  &#39;City&#39;: &#39;Houston&#39;,
  &#39;State&#39;: &#39;Texas&#39;,
  &#39;Meals&#39;: &#39;356,894&#39;},
 {&#39;id&#39;: 15,
  &#39;Restaurant&#39;: &#39;Joes Seafood, Prime Steak &amp; Stone Crab&#39;,
  &#39;Sales&#39;: &#39;22,477,000&#39;,
  &#39;Avg&#39;: &#39;94&#39;,
  &#39;City&#39;: &#39;Washington&#39;,
  &#39;State&#39;: &#39;N/A&#39;,
  &#39;Meals&#39;: &#39;255,000&#39;},
 {&#39;id&#39;: 16,
  &#39;Restaurant&#39;: &#39;In-n-out&#39;,
  &#39;Sales&#39;: &#39;1200&#39;,
  &#39;Avg&#39;: &#39;30&#39;,
  &#39;City&#39;: &#39;San Diego&#39;,
  &#39;State&#39;: &#39;California&#39;,
  &#39;Meals&#39;: &#39;800000&#39;}]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">updateq</span><span class="p">():</span>    
    <span class="n">Restaurant</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the name of the Restaurant to update: &quot;</span><span class="p">)</span>
    <span class="n">Dinner</span> <span class="o">=</span> <span class="n">find_by_Restaurant</span><span class="p">(</span><span class="n">Restaurant</span><span class="p">)</span>
    
    <span class="c1"># Request new values for the QB attributes</span>
    <span class="n">Sales</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter their Total Sales : &quot;</span><span class="p">)</span>
    <span class="n">Avg</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter their Average Checks : &quot;</span><span class="p">)</span>
    <span class="n">City</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter their City season: &quot;</span><span class="p">)</span>
    <span class="n">State</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter Their state: &quot;</span><span class="p">)</span>
    <span class="n">Meals</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter their total Meals: &quot;</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">Dinner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
            <span class="n">Dinner</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">Restaurant</span><span class="o">=</span><span class="n">Restaurant</span><span class="p">,</span> <span class="n">Sales</span><span class="o">=</span><span class="n">Sales</span><span class="p">,</span> <span class="n">Avg</span><span class="o">=</span><span class="n">Avg</span><span class="p">,</span> <span class="n">City</span><span class="o">=</span><span class="n">City</span><span class="p">,</span> <span class="n">State</span><span class="o">=</span><span class="n">State</span><span class="p">,</span> <span class="n">Meals</span><span class="o">=</span><span class="n">Meals</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Updated Restaurant&quot;</span><span class="p">,</span> <span class="n">Restaurant</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>

<span class="n">updateq</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Updated Restaurant In-n-out
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">():</span>
    <span class="c1"># optimize user time to see if uid exists</span>
    <span class="n">Restaurant</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter a Restaurant name:&quot;</span><span class="p">)</span>
    <span class="n">Dinner</span> <span class="o">=</span> <span class="n">find_by_Restaurant</span><span class="p">(</span><span class="n">Restaurant</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">Restaurant</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Try again, that was not a valid Restaurant:&quot;</span><span class="p">)</span>
    
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">object</span> <span class="o">=</span> <span class="n">Dinner</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Deleted</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">Dinner</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object not created</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unknown error uid </span><span class="si">{Restaurant}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">delete</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Deleted
 {&#34;id&#34;: 16, &#34;Restaurant&#34;: &#34;In-n-out&#34;, &#34;Sales&#34;: &#34;5000&#34;, &#34;Avg&#34;: &#34;30&#34;, &#34;City&#34;: &#34;San Diego&#34;, &#34;State&#34;: &#34;California&#34;, &#34;Meals&#34;: &#34;100000&#34;}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">crudmenu</span><span class="p">():</span>
    <span class="n">selection</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter a letter to select your option --&gt; c: Create, r: Read, u: Update, d: delete&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">selection</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span>
        <span class="n">create</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">selection</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;r&quot;</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">Restaurant_B</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">json_ready</span> <span class="o">=</span> <span class="p">[</span><span class="n">restaurant_B</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="k">for</span> <span class="n">restaurant_B</span> <span class="ow">in</span> <span class="n">table</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">json_ready</span>
    <span class="k">elif</span> <span class="n">selection</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;u&quot;</span><span class="p">:</span>
        <span class="n">updateq</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">selection</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;d&quot;</span><span class="p">:</span>
        <span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter a valid letter --&gt; c: Create, r: Read, u: Update, D: delete&quot;</span><span class="p">)</span>

<span class="n">crudmenu</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Updated Restaurant In-n-out
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The update() function takes an id parameter to identify which user to update, and a data parameter containing the updated user data. It first retrieves the user from the database using the filter_by() method and the provided id. If the user exists, it then calls the update() method on the user object, passing in the data parameter. The update() method is a custom method you would need to define on your User model that updates the user's attributes based on the provided data. Finally, the function commits the changes to the database and returns the updated user data in JSON format.</p>
<p>The delete() function is similar to the update() function, but instead of updating the user, it deletes the user from the database. If the user exists, it calls the delete() method on the user object, commits the changes, and returns the deleted user data in JSON format. If the user does not exist, it returns None.</p>
<p>Note that you would also need to define the update() and delete() methods on your User model in order to use these functions.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Hacks">Hacks<a class="anchor-link" href="#Hacks"> </a></h1><ul>
<li>Add this Blog to you own Blogging site.  In the Blog add notes and observations on each code cell.</li>
<li>Change blog to your own database.</li>
<li>Add additional CRUD<ul>
<li>Add Update functionality to this blog.</li>
<li>Add Delete functionality to this blog.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
</div>
 

